(this["webpackJsonptest-task-solbegsoft"]=this["webpackJsonptest-task-solbegsoft"]||[]).push([[0],{16:function(e,t,n){e.exports={comment:"Comment_comment__2Omi9",time:"Comment_time__3dXsc",text:"Comment_text__BIB5A"}},22:function(e,t,n){e.exports={wrapper:"Preloader_wrapper__XWtOl",lds_ellipsis:"Preloader_lds_ellipsis__1vZYw","lds-ellipsis1":"Preloader_lds-ellipsis1__2jl3W","lds-ellipsis2":"Preloader_lds-ellipsis2__3i0R8","lds-ellipsis3":"Preloader_lds-ellipsis3__5kAyR"}},32:function(e,t,n){e.exports={footer:"Footer_footer__219bm"}},33:function(e,t,n){e.exports={h1:"Title_h1__OlV3-"}},34:function(e,t,n){e.exports={Gallery:"Gallery_Gallery__1kLzj"}},39:function(e,t,n){e.exports={App:"App_App__unJ-6"}},49:function(e,t,n){},7:function(e,t,n){e.exports={input:"FormComments_input___Wh_E",btn:"FormComments_btn__L-hDR",err:"FormComments_err__1_qFm",btnDisabled:"FormComments_btnDisabled__3eklV","button-loading-spinner":"FormComments_button-loading-spinner__30Wyi",form:"FormComments_form__3dX4Y"}},73:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(10),o=n.n(s),i=n(11),r=(n(49),n(32)),a=n.n(r),m=n(1),l=function(){return Object(m.jsx)("footer",{className:a.a.footer,children:"\xa9 2018-2019"})},u=n(33),d=n.n(u),j=function(){return Object(m.jsx)("h1",{className:d.a.h1,children:"Test APP"})},h=n(23),b=n(34),f=n.n(b),_=n(8),O=n.n(_),p=n(13),x=n(3),v=n(35).create({baseURL:"https://boiling-refuge-66454.herokuapp.com/"}),g=function(){return v.get("images")},C=function(e){return v.get("images/".concat(e))},F=function(e,t){return v.post("images/".concat(e,"/comments"),t)},N="SET_LIST_OF_PHOTO/ListOFPhotoReducer",P="SET_IS_FETCHING/ListOFPhotoReducer",y={isFetching:null,listOfPhoto:[]},k=function(e){return{type:P,isFetching:e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(x.a)(Object(x.a)({},e),{},{listOfPhoto:t.photos});case P:return Object(x.a)(Object(x.a)({},e),{},{isFetching:t.isFetching});default:return e}},T=n(22),E=n.n(T),w=function(){return Object(m.jsx)("div",{className:E.a.wrapper,children:Object(m.jsxs)("div",{className:E.a.lds_ellipsis,children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{})]})})},A=n(9),R=n.n(A),I="SET_IS_FETCHING/PhotoAndCommentsReducer",M="DELETE_INFO/PhotoAndCommentsReducer",L="SET_INFO/PhotoAndCommentsReducer",D="SET_IS_FETCHING_SEND_COMMENT/PhotoAndCommentsReducer",B="ADD_COMMENT/PhotoAndCommentsReducer",G={isFetching:null,isFetchingSendComment:null,info:[]},Y=function(e){return{type:I,isFetching:e}},H=function(e){return{type:D,isFetching:e}},J=function(e){return{type:B,comment:e}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(x.a)(Object(x.a)({},e),{},{isFetching:t.isFetching});case M:return Object(x.a)(Object(x.a)({},e),{},{info:[]});case L:return Object(x.a)(Object(x.a)({},e),{},{info:t.info});case D:return Object(x.a)(Object(x.a)({},e),{},{isFetchingSendComment:t.isFetching});case B:var n=Object(x.a)({},e.info);return n.comments.push(t.comment),Object(x.a)(Object(x.a)({},e),{},{info:n});default:return e}},W=n(36),X=n.n(W),q=n(16),U=n.n(q),z=function(e){var t=e.text,n=e.unix;return Object(m.jsxs)("div",{className:U.a.comment,children:[Object(m.jsx)("div",{className:U.a.time,children:Object(m.jsx)(X.a,{format:"DD.MM.YYYY",date:n})}),Object(m.jsx)("div",{className:U.a.text,children:t})]})},Q=n(17),Z=n(7),K=n.n(Z),$=function(e){var t=e.id,n=e.info,c=e.isFetchingSendComment,s=e.sendCommentThunk,o=function(e){var t;return e?e.length<3&&(t="\u0418\u043c\u044f \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435!"):t="\u0412\u044b \u043d\u0435 \u0432\u0432\u0435\u043b\u0438 \u0438\u043c\u044f!",t},i=function(e){var t;return e?e.length<5&&(t="\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439!"):t="\u0412\u044b \u043d\u0435 \u0432\u0432\u0435\u043b\u0438 \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439!",t};return Object(m.jsx)("div",{className:K.a.form,children:Object(m.jsx)(Q.b,{initialValues:{name:"",comment:""},validateOnBlur:!0,onSubmit:function(e,c){var o=c.resetForm;s(t,e,{id:n.comments.length,text:e.comment,date:Date.now()}),o()},children:function(e){var t=e.values,n=e.errors,s=e.touched,r=e.handleChange,a=e.handleBlur,l=e.isValid,u=(e.validate,e.handleSubmit),d=e.dirty;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Q.a,{className:K.a.input,placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",name:"name",onChange:r,onBlur:a,value:t.name,validate:o,type:"text"}),s.name&&n.name&&Object(m.jsx)("span",{className:K.a.err,children:n.name}),Object(m.jsx)(Q.a,{className:K.a.input,placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",name:"comment",onBlur:a,value:t.comment,validate:i,type:"text"}),s.comment&&n.comment&&Object(m.jsx)("span",{className:K.a.err,children:n.comment}),!c&&Object(m.jsx)("button",{className:K.a.btn,disabled:!l&&!d,onClick:u,type:"submit",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),c&&Object(m.jsx)("button",{disabled:!0,className:"".concat(K.a.btn," ").concat(K.a.btnDisabled)})]})}})})},ee=Object(i.b)((function(e){return{isFetching:e.PhotoAndCommentsReducer.isFetching,info:e.PhotoAndCommentsReducer.info,isFetchingSendComment:e.PhotoAndCommentsReducer.isFetchingSendComment}}),{setInfoThunk:function(e){return function(){var t=Object(p.a)(O.a.mark((function t(n){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Y(!0)),t.next=3,C(e);case 3:200===(c=t.sent).status&&n((s=c.data,{type:L,info:s})),n(Y(!1));case 6:case"end":return t.stop()}var s}),t)})));return function(e){return t.apply(this,arguments)}}()},sendCommentThunk:function(e,t,n){return function(){var c=Object(p.a)(O.a.mark((function c(s){return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s(H(!0)),c.next=3,F(e,t).catch((function(e){return console.log(e)}));case 3:204===c.sent.status&&s(J(n)),s(H(!1));case 6:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}})((function(e){var t=e.close,n=e.id,s=e.isFetching,i=e.info,r=e.setInfoThunk,a=e.isFetchingSendComment,l=e.sendCommentThunk;return Object(c.useEffect)((function(){r(n)}),[n,r]),Object(m.jsx)("div",{children:o.a.createPortal(Object(m.jsx)("div",{className:R.a.modal,children:Object(m.jsxs)("div",{className:R.a.wrap,children:[Object(m.jsx)("div",{className:R.a.close,onClick:function(){return t(!1)}}),s?Object(m.jsx)(w,{}):Object(m.jsxs)("div",{className:R.a.content,children:[Object(m.jsx)("img",{className:R.a.img,src:i.url,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 ".concat(n)}),Object(m.jsxs)("div",{className:R.a.comment,children:[(null===i||void 0===i?void 0:i.comments)&&0===i.comments.length&&Object(m.jsx)("div",{className:R.a.nocomments,children:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u044e\u0442"}),(null===i||void 0===i?void 0:i.comments)&&0!==i.comments.length&&i.comments.map((function(e){return Object(m.jsx)(z,{unix:e.date,text:e.text},e.id)}))]}),Object(m.jsx)($,{sendCommentThunk:l,isFetchingSendComment:a,info:i,id:n})]})]})}),document.getElementById("portal"))})})),te=Object(i.b)((function(e){return{isFetching:e.ListOfPhotoReducer.isFetching,listOfPhoto:e.ListOfPhotoReducer.listOfPhoto}}),{setListofPhotos:function(){return function(){var e=Object(p.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(k(!0)),e.next=3,g();case 3:200===(n=e.sent).status&&t((c=n.data,{type:N,photos:c})),t(k(!1));case 6:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.setListofPhotos,n=e.isFetching,s=e.listOfPhoto,o=Object(c.useState)(!1),i=Object(h.a)(o,2),r=i[0],a=i[1],l=Object(c.useState)(null),u=Object(h.a)(l,2),d=u[0],j=u[1];Object(c.useEffect)((function(){t()}),[t]);return Object(m.jsxs)("div",{className:f.a.Gallery,children:[n?Object(m.jsx)(w,{}):s.map((function(e){return Object(m.jsx)("img",{onClick:function(){return function(e){j(e),a(!0)}(e.id)},src:e.url,alt:e.id},e.id)})),r&&Object(m.jsx)(ee,{id:d,close:a})]})})),ne=n(39),ce=n.n(ne);var se=function(){return Object(m.jsxs)("div",{className:ce.a.App,children:[Object(m.jsx)(j,{}),Object(m.jsx)(te,{}),Object(m.jsx)(l,{})]})},oe=n(18),ie=n(40),re=Object(oe.b)({ListOfPhotoReducer:S,PhotoAndCommentsReducer:V}),ae=Object(oe.c)(re,Object(oe.a)(ie.a));o.a.render(Object(m.jsx)(i.a,{store:ae,children:Object(m.jsx)(se,{})}),document.getElementById("root"))},9:function(e,t,n){e.exports={modal:"Modal_modal__2Lmq4",wrap:"Modal_wrap__2Y-44",close:"Modal_close__1oxMk",img:"Modal_img__E2Nao",photoAndComment:"Modal_photoAndComment__2tJfv",content:"Modal_content__UrQGk",nocomments:"Modal_nocomments__5Xwn9"}}},[[73,1,2]]]);
//# sourceMappingURL=main.833f03d7.chunk.js.map